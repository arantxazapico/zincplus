\documentclass[11pt,letterpaper,usenames,dvipsnames]{article}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% PACKAGES
\usepackage{amsmath,amssymb,amsthm}
\usepackage{fullpage}
\usepackage{multirow}
\usepackage{bbm,soul}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{lipsum}
\usepackage{makecell}
\usepackage{bm}
\usepackage{braket}
\usepackage{adjustbox,mdframed}
\usepackage[operators,sets,primitives,asymptotics,lambda,keys,ff]{cryptocode}
\usepackage{enumitem}
\usepackage{geometry}
\usepackage{booktabs}
\usepackage[font=footnotesize,labelfont=bf]{caption}
\usepackage{mleftright}
\usepackage{wrapfig}
\usepackage{setspace}
\usepackage{xspace}
\usepackage{algorithm,algorithmic}
\floatname{algorithm}{Protocol}
%\crefname{algorithm}{Protocol}{Protocols}
%\Crefname{algorithm}{Protocol}{Protocols}
\renewcommand{\algorithmiccomment}[1]{// #1}
\renewcommand{\algorithmicrequire}{\textbf{Input:}}
\renewcommand{\algorithmicensure}{\textbf{Output:}}
\usepackage{authblk}

\usepackage{framed}
\usepackage{comment}
\usepackage{placeins} % in the preamble

\usepackage{float}
\usepackage{graphicx}
\graphicspath{ {./figures/} }
\usepackage[T1]{fontenc}
\usepackage{titlesec}
\usepackage{stmaryrd}

\usepackage[backend=biber,giveninits,style=alphabetic,maxalphanames=6,maxnames=6,backref]{biblatex}
\addbibresource{references.bib} 
%\addbibresource{cryptobib/abbrev3.bib} 
%\addbibresource{cryptobib/crypto_crossref.bib}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\plaintitle}{Zinc{+}}
\newcommand{\stylizedtitle}{\textsf{Zinc{+}}}
\PassOptionsToPackage{hyphens}{url}\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=CadetBlue,
    breaklinks=true,
    citecolor=Periwinkle,      
    urlcolor=Emerald,
    pdftitle={\plaintitle},
    pdfpagemode=FullScreen,
}
\DefineBibliographyStrings{english}{%
  backrefpage = {cited on p.},% originally "cited on page"
  backrefpages = {cited on pp.},% originally "cited on pages"
}
% Remove starred sections from toc
\DeclareRobustCommand{\SkipTocEntry}[5]{} 
\usepackage[capitalize, nameinlink]{cleveref}
\usepackage{tikz}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{macros}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{\stylizedtitle}

\newcommand{\FormatAuthor}[3]{%
\begin{tabular}{c}
#1 \\ {\small\texttt{#2}} \\ {\small #3}
\end{tabular}
}

\author{
	Albert Garreta, Psi Vesely, Arantxa Zapico
}
\date{\today}

\newcommand{\albert}[1]{\textcolor{teal}{Albert: {#1}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\maketitle

\begin{abstract}
\end{abstract}

\setcounter{tocdepth}{2}
\begin{spacing}{0.8}
{\footnotesize \tableofcontents}
\end{spacing}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\cR}{\mathcal{R}}

\section{Introduction}


\section{Preliminaries}

        

\subsection{Rings and rings of polynomials} Throughout the paper we extensively work with multivariate polynomials whose coefficients are polynomials themselves. Formally, given a ring $\cR$ and variables $\YY=(Y_1,\ldots, Y_\mu)$, we let $\cR[\YY]$ denote the ring of multivariate polynomials on variables $\YY$, with coefficients inn $\cR$. For us, typically $\cR$ will be of the form $\ZZ[X]$ or $\QQ[X]$ (or even $\local{q}[X]$ for some prime $q$). In that case, $\cR[\YY]$ contains all polynomials on variables $\YY$ whose coefficients are polynomials from $\ZZ[X]$ (or $\QQ[X]$, or $\local{q}[X]$). 

The ring $(\ZZ[X])[\YY]$ is isomorphic to the ring $\ZZ[X, \YY]$ of all polynomials with integer coefficients on variables $(X,\YY)$  (and similarly for $(\QQ[X])[\YY]$ and $(\local{q}[X])[\YY]$). However, in this work we do not use this isomorphic representation of our polynomials, and insist on viewing elements from $(\ZZ[X])[\YY]$ as polynomials on the variables $\YY$ with coefficients in $\ZZ[X]$. We denote such a polynomial by $$f(X;\YY),$$
highlighting the presence of the variable $X$. The reason for doing so is that sometimes we will want to evaluate $X$ at a specific value $x$, obtaining a polynomial $f(x;\YY)$ in $\ZZ[\YY]$, and sometimes we will need to evaluate the variables $\YY$ at a specific values $\yy$, and we will look at the result as  a polynomial $f(X,\yy)$ in $\ZZ[X]$. 

In general, we denote vectors of elements with lowercase boldface letters, e.g.\ $\vv,\uu,$ etc. Given a ring $\cD$ (typically $\ZZ, \QQ$, or $\local{q}$), we denote vectors of elements from $(\cD[X])[\YY]$ as $\vv(X;\YY), \uu(X;\YY)$, etc.


For every ring $\cR$  we fix a publicly known representation of its elements as strings of bits. By $\cR_{\leq B}$ we denote the subset of $\cR$ formed by all elements whose bitstring representation contains at most $B$ bits. In \cref{s: bistring_reps} we describe the representation we use for the rings $\ZZ,\QQ, \ZZ[X],$ and $\QQ[X]$ \albert{And $\local{q},\local{q}[X]$?}.


\subsection{Commutative algebra}
All rings considered in this paper are associative, commutative, and have a multiplicative identity. Let $\cR$ be a ring. A subset $I$ of $\cR$ is an \emph{ideal} of $\cR$ if for all $a\in I$ and $b\in \cR$, one has $a\cdot b \in I$, and $I$ is additively closed, i.e.\ $a_1 + a_2 \in I$ for all $a_1, a_2\in I$. The ideal generated by a set of elements $S\subseteq \cR$ is the set $\{\sum_{s\in S} a_s \cdot s \mid (a_s)_{s\in S}\in \cR^{|S|}\}$. An ideal is \emph{prime} if for all $a,b\in \cR$ such that $a\cdot b \in I$, one has that either $a$ or $b$ belongs to $I$. 

Given a ring $\cR$ and an ideal $I$ of $\cR$, the \emph{quotient ring} of $\cR$ by $I$ is the set  $\cR/I =\{a+I \mid a\in \cR\}$. The set $\cR/I$ is itself a ring under the natural addition and multiplication operations.  The map $\pi:\cR\to \cR/I$ sending each $a\in \cR$ to $a+I$ is a ring homomorphism which we call the \emph{natural projection of $\cR$ onto $\cR/I$.}

A ring $\cR$ is an \emph{integral domain} if for all nonzero $a,b\in \cR$ we have $a\cdot b\neq 0$. Every integral domain $\cR$ is a subring of a field (namely, the field of fractions of $\cR$). The following result is well-known:
\begin{remark}\label{r: domain_prime}
Let $\cR$ be a ring and let $I$  be an ideal of $\cR$. Then $\cR/I$ is an integral domain if and only if $I$ is a prime ideal.
\end{remark}

Given a ring $\cR$ and a tuple of variables $\YY$, the set $\cR[\YY]$ formed by all polynomials on variables $\YY$ and coefficients in $\cR$ forms a ring. Given two rings $\cR_1$ and $\cR_2$, any ring homomorphism $f:\cR_1 \to \cR_2$  extends naturally to a ring homomorphism $\cR_1[\YY] \to \cR_2[\YY]$ by applying $f$ coeffcient-wise to the coefficients of the polynomials in $\cR_1[\YY]$ (with respect to any basis like the monomial basis). 

Let $X$ be a single variable and $\cR$ a ring. A polynomial $f(X)\in \cR[X]$ is \emph{irreducible} if it is nonzero and whenever $f(X)=a(X)\cdot b(X)$ for some $a(X), b(X)\in \cR[X]$, we have that either $a(X)$ or $b(X)$ is constant (i.e.\ it has degree $0$). The following result is well-known:
\begin{remark}\label{r: prime_ideals_of_RX}
\albert{Prove?} An ideal $I$ of a ring $\cR[X]$ is prime if and only if it is generated by a non- irreducible polynomial of $\cR[X]$ or by a prime element of $\cR$.
\end{remark}

The following version of Schwartz-Zippel lemma applies to polynomials of arbitrary degree. We state and prove it only for multilinear polynomials because this is the only scenario where we will need it. Its generalization is straightforward.
\begin{lemma}[Schwartz-Zippel lemma for (possibly infinite) integral domains]\label{l: SZ_for_integral_domains}
%
Let $\dom$ be an integral domain, possibly infinite, and let $S$ be a finite subset of $\dom$. Let $\YY$ be a tuple of variables and let $f(\YY)\in D^\multilin[\YY]$ be a non-zero polynomial. Then the number of elements $\rr\in S^{|\YY|}$ such that $f(\rr)=0$ is at most $S^{|\YY|-1}$. 
%
\end{lemma}
\begin{proof}
Let $\YY=(Y_1,\ldots, Y_\mu)$. We proceed by induction on $\mu$. If $\mu=1$ then $f(\YY) = a Y_1 + b$. If $a=0, b\neq 0$ then $f$ has no roots. If $a\neq 0$ then any root $r$ satisfies $a\cdot r + b = 0$. In particular, $r = -b\cdot a^{-1}$ where $a^{-1}$ is the inverse of $a$ in the field of fractions of $\dom$. If $\mu > 1$, write  $f(\YY) = a(Y_1,\ldots, Y_{\mu-1}) \cdot Y_\mu +  b(Y_1,\ldots, Y_{\mu-1})$ for some multilinear polynomials $a,b\in D^\multilin[Y_1,\ldots, Y_\mu]$. If $a$ is the zero polynomial, then the result follows by induction. Assume $a$ is not the zero polynomial, and let  $\rr=(r_1,\ldots, r_{\mu}) \in  S^{\mu}$ be such that $f(\rr)=0$. Then either $a(r_1,\ldots, r_{\mu-1})=0$, or $r_\mu = -b(r_1,\ldots, r_{\mu-1})\cdot a(r_1,\ldots, r_{\mu-1})^{-1}$ where, as before, the inverse is taken in the field of fractions of $\dom$.  Hence the set of roots of $f$  is contained in the set $\{(r_1,\ldots,r_\mu)=(\rr',r_\mu) \in S^\mu \mid a(\rr')= 0, \text{ or } r_\mu = -b(\rr')\cdot a(\rr')^{-1}\}$. By induction, this latter set has size at most $|S|^{\mu-1}$, and the lemma follows. 
%
\end{proof}


\subsection{Bitstring representation of ring elements}\label{s: bistring_reps}
\albert{To do.}

\subsection{Reductions of knowledge}

\section{Algebraic constraints over $\QQ[X]$ modulo prime ideals}

In this section we define the type of constraints we are interested in working on. As we argued in \cref{?}, and as we see later in \cref{s: example_sha}, these constraints are highly expressive, and can  express essentially all computations of interest with almost no arithmetization overhead.

\newcommand{\evalconstraints}{\text{\emph{Eval}}}
\newcommand{\mainQpolyring}{(\QQ[X]_{\leq B})}
\newcommand{\mainQpolyringmultilin}{(\QQ[X]_{\leq B})^{\multilin}}

%\begin{definition}  Let $I$ be a prime ideal of $\cQ[X]$. A \emph{system of algebraic equations modulo l $I$} is a set of polynomials with coefficients in $\QQ[X]$ (possibly multivariate and of arbitrary degree), and $I$ is a prime ideal of the ring $\QQ[X]$. We assume $|\cQ|$ is a power of two.
%\end{definition}


%and index the entries in $\cQ$ with elements from $\{0,1\}^{\log|\cQ|}$.
%

\newcommand{\megaQ}{\mathfrak{Q}}

Let $I_1,\ldots, I_t$ be a collection of prime ideals of $\QQ[X]$. For each $i\in [t]$, let $\cQ_t$ be a set  of polynomials with coefficients in $\QQ[X]$ (possibly multivariate and of arbitrary degree), with $|\cQ_t|$ a power of two. 
We index the polynomials in $\cQ_i$ with elements from $\{0,1\}^{\log|\cQ_i|}$, for each $i\in [t]$. Denote 
%
$$
\megaQ = \{(\cQ_1, I_1), \ldots, \cQ_t, I_t\}.
$$
%Let $\evalconstraints$ be a set of triples $(i, j, a)$ where $i,j\in [k]$ and $a \in \QQ$. 
%
Let $\gp = (k, m, n, \mu, B)$ be global parameters, where $k,m,n,B$ are size parameters.  An algebraic relation for $(\gp,\megaQ)$ is a set $\REL_{\gp, \cQ}$ of triples $(\idx, \inp;\wit)$ with the following properties:
\begin{itemize}
	\item The \emph{index} $\idx$ contains $n$ oracles $\oracle{g_1(X;\YY)}, \ldots, \oracle{g_n(X;\YY)}$ to multilinear polynomials from $\mainQpolyring^\multilin[\YY]$, where $\YY=(Y_1,\ldots, Y_\mu) $ is a tuple of variables.
	 \item For each $i\in [t]$, $\cQ_t$ is a set of polynomials %$$\cQ_t=\{Q_{t,\bb}\}_{\bb\in \{0,1\}^{\log|\cQ_t|}}$$
     with coefficients in $\QQ[X]$, each on $(n+ k)\cdot 2^\mu + m$ variables.
	\item $\wit$ is a vector consisting of $k$ multilinear polynomials $f_1(X;\YY),\ldots, f_k(X;\YY)$ from $\mainQpolyring^{\multilin}[\YY]$. %and the multilinear polynomials $g_1,\ldots, g_n\in \R_B^\multilin[\XX]$.
	\item $\inp=(\zz(X), \oracle{f_1(X;\YY)}, \ldots, \oracle{f_k(X;\YY))})$, where $\zz\in \mainQpolyring^m$.
	\item For each  $i\in [t]$  and $Q\in \cQ_t$, we have that $Q$ belongs to $I$  when evaluated on the values $$\vv_{\idx, \inp,\wit}(X)=(\yy(X), (g_1(X;\yy),\ldots, g_n(X;\yy), f_1(X,\yy),\ldots, f_k(X;\yy))_{\yy\in \BB^\mu}),$$
    i.e.
    $$
    Q(\vv_{\idx, \inp,\wit}(X)) \in I_t.
    $$
    %\item For each  polynomial $Q \in \cQ$, we have that $Q$ vanishes  when evaluated on the values $$\vv_{\idx, \inp,\wit}(X)=(\yy(X), (g_1(X;\yy),\ldots, g_n(X;\yy), f_1(X,\yy),\ldots, f_k(X;\yy))_{\yy\in \BB^\mu}),$$
    %i.e.
    %$$
    %Q(\vv_{\idx, \inp,\wit}(X)) =0.
    %$$
    %\item \albert{New thing wrt Zinc!} For each $(i,j,a)\in \evalconstraints$ we have
    %
    %$$
    %f_i(a; \yy) = f_j(a;\yy) \quad \text{for all } \yy\in \{0,1\}^\mu.
    %$$
    %\albert{Should we allow for X-evaluations of elements in the public instance?}
	\end{itemize}
%
    Formally, $\REL_{\gparams,\megaQ}$ has the following form:
    %
    \begin{equation*}
    \begin{aligned}
    \REL_{\gparams,\megaQ} = \left\{ (\idx, \inp ; \wit) \left| \ \begin{aligned}
    & \gparams=(k,m,n,\mu, B),  \\
    & \idx = ( \oracle{g_1(X;\YY)},\ldots, \oracle{g_n(X;\YY)}), \ \YY=(Y_1,\ldots, Y_\mu), \\
            &(g_1(X;\YY),\dots,g_n(X;\YY))\in \left(\mainQpolyringmultilin[\YY]\right)^{n},\\
    & \inp =(\yy(X), \oracle{f_1(X;\YY)}, \ldots, \oracle{f_k(X;\YY)}),\\ &\yy(X)\in \mainQpolyring^{m},\\    
        &\wit = (f_1(X;\YY), \ldots, f_k(X;\YY)) \in \left(\mainQpolyringmultilin[\YY]\right)^{n},\\
        &Q(\vv_{\idx, \inp,\wit}(X)) \in I_i  \text{ for all } i\in [t], \ Q\in \cQ_i,\\
        &\vv_{\idx, \inp,\wit}(X) = \left(\begin{aligned}&\yy(X),\\ &\left(\begin{aligned}&g_1(X;\yy),\ldots, g_n(X;\yy),\\ &f_1(X,\yy),\ldots, f_k(X;\yy)\end{aligned}\right)_{\yy\in \BB^\mu}\\
     \end{aligned}\right)%,\\
        %& f_i(a;\yy)=f_j(a;\yy)  \text{ for all } \yy\in \{0,1\}^\mu \text{ and } (i,j,a)\in \evalconstraints
    \end{aligned} \right.\right\}
    \end{aligned}
    \end{equation*}


    \begin{definition}[Strictly algebraic relation $\REL_{\gp, \megaQ}$]\label{d: strictly_algebraic} We say that  $\megaQ$ is \emph{strictly algebraic} if $\megaQ$ contains only one pair $(\cQ, I)$ and $I$ is the zero ideal.  In that case,  the constraints $$Q(\vv_{\idx, \inp,\wit})\in I_i, \quad \text{ for all } i\in [t],\ Q\in \cQ_i$$ from $\REL_{\gp,\megaQ}$ become $$Q(\vv_{\idx, \inp,\wit})=0, \quad  \text{ for all }Q\in \cQ$$
    \end{definition}
    
\subsection{Example: SHA256 hashing + RSA signature verification}\label{s: example_sha}


\subsection{Reduction to strictly algebraic relations}

 In this section we provide a reduction of knowledge from a any relation of the form $\REL_{\gp, \cQ}$ to a strictly algebraic relation $\REL_{\gp, \cQ'}$ (cf.\ \cref{d: strictly_algebraic}), where $\cQ'$ consists of just one pair $(Q', I)$, with $I$ being the zero  ideal. 


    \begin{lemma}
    Let $f(X;\YY) \in (\QQ[X])^{\multilin}[\YY]$ be a multilinear polynomial on variables $\YY= (Y_1,\ldots, Y_\mu)$ and coefficients in $\QQ[X]$. Let $i(X) \in \QQ[X]$ be a non-constant irreducible polynomial, and let $I$ be the ideal of $\QQ[X]$ generated by $I$. 
    
    Assume $f(X;\yy)\not\in I$ for some $\yy\in \QQ^\mu$. Let $S$ be a finite subset of $\QQ$. Then the number of elements $\rr\in S^\mu$ such that $f(X;\rr)\in I$ is a most $|S|^{\mu-1}$.
    \end{lemma}
    \begin{proof}
    Let $\dom= \QQ[X]/I$ and let  $\pi:\QQ[X] \to D$ be the natural projection of $\QQ[X]$ onto $\dom$. The ring $\dom$ is an integral domain by \cref{r: domain_prime}, and so $\dom$ is a subring of a field $\KK$. Let $\pi:(\QQ[X])[\YY]\to D[\YY]$ be the natural extension of $\pi$ for polynomials (cf.\ \cref{??}). Let $g(\YY) = \pi(f(X;\YY))$, i.e.\ $g(\YY)$ is the result of applying $\pi$ to the coefficients of $f$ (with respect to any basis, like the monomial basis). 
    
     If the polynomial $g(\YY) \in D[\YY]$ was the zero polynomial, then we would have $g(\yy) = 0$, which means that $\pi(f(X;\yy))\in I$, contradicting our assumptions. Hence $g(\YY)$ is not the zero polynomial. Moreover, $|\pi(S)|=|S|$, because whenever $\pi(s_1) = \pi(s_2)$ for some $s_1,s_2\in S$, we have $s_1 - s_2 \in  I$. But $S$ contains only constant polynomials, while all elements of $I$ are either zero or nonconstant polynomials (because $I$ is generated by a non-constant polynomial). Hence the only possibility is that $s_1=s_2$.  We conclude that $\pi$ is a bijection between $S$ and $\pi(S)$.
     
     Now, by Swartz-Zippel lemma for (possibly infinite) integral domains (cf.\ \cref{l: SZ_for_integral_domains}), the number of elements $\rr'\in \pi(S)^\mu$ such that $g(\rr')=0$ is at most $|\pi(S)|^{\mu-1}= |S|^{\mu-1}$. On the other hand, if $\rr\in S^\mu$ is such that $f(X;\rr)\in I$, then $\pi(f(X;\rr))=g(\pi(\rr))=0$ \albert{technically the first equality should be justified}, and so $\pi(\rr)$ is an element from $\pi(S)^{\mu}$ such that $g(\pi(\rr))=0$. Since $\pi$ is a bijection, the result follows.
    \end{proof}

     	\begin{algorithm}[H]
		\caption{A 
        reduction of knowledge from $\cR_{\gp, \cQ}$ to a strictly algebraic relation $\cR_{\gp, \cQ'}$. \label{a: red_to_strictly_algebraic}}
		\textbf{Input:} $\Prover$, $\verifier$ receive inputs $(\idx, \inp; \wit)\in \REL_{\gp, \cQ}$. %Write $\inp=(\xx, \oracle{\tilde{\ww}}, \oracle{\tilde{\uu}})$, with $(\ww, \uu)\in \ZZ_B^{2n-k-1}$,  $\xx\in \ZZ_B^{k}$.
		\begin{algorithmic}[1]
            \STATE $\verifier$ samples $\rr\in S^\mu$ uniformly at random, for a fixed finite subset of $\QQ$. 
            \STATE $\prover$ replies with an alement $a(X)\in \QQ[X]$ such that
            %
            $$
            \sum_{\bb\in \{0,1\}^{\log|\cQ|}} Q_b(\vv_{\idx,\inp,\wit}(X))\cdot \eq(\bb; \rr) = a(X)
            $$
            \STATE 
		\end{algorithmic}
	\end{algorithm}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Zinc+ PIOP}





\section{Zip+: A polynomial commitment scheme for $(\QQ[X])[\vec Y]$}
\input{sections/zip+}
	
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Proximity gaps for infinite rings}
\label{sec:proximity-gap}

\parhead{Informal proximity gap for proposed split encoding}
Consider a projectable linear code $C$ over $\integers$ with a systematic generator matrix $G = [I_{\dim} \ G']$, and a good random choice of $q$. The honest prover will encode a message $m \in \integers^{\dim}$ as $m \| (G'm \bmod q) \in \integers^{\dim} \times \integers_{q}^{\blocklength-\dim}$.

Now consider an arbitrary set of vectors over $v_1,\dotsc,v_{m} \in \integers^{\dim} \times \integers_{q}^{\blocklength-\dim}$, and let $(u_1,\dotsc,u_m) \equiv (v_1,\dotsc,v_{m}) \bmod q$. We know from~\cite[Theorem 4.1]{BKS18} that if there exists $u^\ast \in \set{\sum_{i=1}^{m} \alpha_i u_i \mid \alpha_1,\dotsc,\alpha_m \in \integers_q}$ such that $\reldist{u^\ast}{C} > \delta$, then for any $\epsilon > 0$ such that $\delta-\epsilon < \lambda/3$ it holds that
\[
\Pr_{\alpha \gets \integers_{q}^m} \left[\reldist{\sum_{i=1}^{m} \alpha_i u_i}{C} < \delta - \epsilon\right] < \frac{1}{\epsilon q}
\]
Since for any $\alpha$ we have $\reldist{\sum_{i=1}^{m} \alpha_i v_i}{C} \leq \reldist{\sum_{i=1}^{m} \alpha_i u_i}{C}$, this above result also holds for with respect to the $v_i$.

% We first recall the unique decoding version of the correlated agreement result for linear codes from~\cite{BKS18}.
% \begin{lemma}[Correlated agreement over affine spaces~\cite{BKS18}]
% \label{lemma:correlated-agreement}

% Let $V \subseteq \field^\blocklength$ be a linear space over a finite field $\field$ with $\Delta(C) = \lambda$. Suppose $u^\ast \in \ring^b$ satisfies $\Delta(u^\ast,C) > \delta$, and fix arbitrary $u \in \ring^b$. Let $\challengeset \subseteq \ring$ be an exceptional set. For $\epsilon > 0$ satisfying $\delta - \epsilon < \lambda/3$. Let
% \[
% A = \{\alpha \in \mathcal{C} \mid \distance{u^\ast + \alpha u}{C} < \delta - \varepsilon\}
% \]
% If $|A| > 1/\varepsilon$ then there exist $v, v^\ast \in C$ such that
% \[
% \bigl|\set{i \in [n] \mid (u_i = v_i) \ \wedge \ (u^\ast_i = v^\ast_i)}\bigr| \geq (1 - \delta)\cdot n
% \]
% \parhead{Informal proximity gap for proposed split encoding}
% Consider a projectable linear code $C$ over $\integers$ with a systematic generator matrix $G = [I_{\dim} \ G']$, and a good random choice of $q$. The honest prover will encode a message $m \in \integers^{\dim}$ as $m \| (G'm \bmod q) \in \integers^{\dim} \times \integers_{q}^{\blocklength-\dim}$.

% Now consider an arbitrary set of vectors over $v_1,\dotsc,v_{m} \in \integers^{\dim} \times \integers_{q}^{\blocklength-\dim}$, and let $(u_1,\dotsc,u_m) \equiv (v_1,\dotsc,v_{m}) \bmod q$. We know from~\cite[Theorem 4.1]{BKS18} that if there exists $u^\ast \in \set{\sum_{i=1}^{m} \alpha_i u_i \mid \alpha_1,\dotsc,\alpha_m \in \integers_q}$ such that $\reldist{u^\ast}{C} > \delta$, then for any $\epsilon > 0$ such that $\delta-\epsilon < \lambda/3$ it holds that
% \[
% \Pr_{\alpha \gets \integers_{q}^m} \left[\reldist{\sum_{i=1}^{m} \alpha_i u_i}{C} < \delta - \epsilon\right] < \frac{1}{\epsilon q}
% \]
% Since for any $\alpha$ we have $\reldist{\sum_{i=1}^{m} \alpha_i v_i}{C} \leq \reldist{\sum_{i=1}^{m} \alpha_i u_i}{C}$, this above result also holds for with respect to the $v_i$.

% We first recall the unique decoding version of the correlated agreement result for linear codes from~\cite{BKS18}.
% \begin{lemma}[Correlated agreement over affine spaces~\cite{BKS18}]
% \label{lemma:correlated-agreement}

% Let $V \subseteq \field^\blocklength$ be a linear space over a finite field $\field$ with $\Delta(C) = \lambda$. Suppose $u^\ast \in \ring^b$ satisfies $\Delta(u^\ast,C) > \delta$, and fix arbitrary $u \in \ring^b$. Let $\challengeset \subseteq \ring$ be an exceptional set. For $\epsilon > 0$ satisfying $\delta - \epsilon < \lambda/3$. Let
% \[
% A = \{\alpha \in \mathcal{C} \mid \distance{u^\ast + \alpha u}{C} < \delta - \varepsilon\}
% \]
% If $|A| > 1/\varepsilon$ then there exist $v, v^\ast \in C$ such that
% \[
% \bigl|\set{i \in [n] \mid (u_i = v_i) \ \wedge \ (u^\ast_i = v^\ast_i)}\bigr| \geq (1 - \delta)\cdot n
% \]
% \end{lemma}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand*{\bibfont}{\small}
\printbibliography
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%